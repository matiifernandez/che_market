<!DOCTYPE html>
<html>
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
    <style>
      body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
      .container { max-width: 600px; margin: 0 auto; padding: 20px; }
      .header { background-color: #4F46E5; color: white; padding: 20px; text-align: center; border-radius: 8px 8px 0 0; }
      .content { background-color: #f9fafb; padding: 20px; border: 1px solid #e5e7eb; }
      .footer { text-align: center; padding: 20px; color: #6b7280; font-size: 14px; }
      .order-details { background-color: white; padding: 15px; border-radius: 8px; margin: 15px 0; }
      .total { font-size: 24px; font-weight: bold; color: #4F46E5; }
      .info-box { background-color: #EEF2FF; border-left: 4px solid #4F46E5; padding: 15px; margin: 15px 0; border-radius: 0 8px 8px 0; }
      .tracking-box { background-color: #ECFDF5; border: 2px solid #10B981; padding: 20px; border-radius: 8px; margin: 20px 0; text-align: center; }
      .tracking-number { font-size: 20px; font-weight: bold; color: #065F46; font-family: monospace; letter-spacing: 1px; }
      .tracking-button { display: inline-block; background-color: #10B981; color: white; padding: 12px 24px; border-radius: 8px; text-decoration: none; font-weight: bold; margin-top: 10px; }
      .timeline { margin: 20px 0; }
      .timeline-step { display: flex; align-items: center; margin: 10px 0; }
      .timeline-dot { width: 20px; height: 20px; border-radius: 50%; margin-right: 15px; }
      .timeline-dot.completed { background-color: #10B981; }
      .timeline-dot.current { background-color: #4F46E5; }
      .timeline-dot.pending { background-color: #D1D5DB; }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>¡Tu pedido está en camino!</h1>
        <p>Che Market</p>
      </div>

      <div class="content">
        <p>¡Hola!</p>

        <p>¡Excelentes noticias! Tu pedido <strong>#<%= @order.id %></strong> ha sido despachado y está en camino hacia vos.</p>

        <% if @order.tracking_number.present? %>
          <div class="tracking-box">
            <p style="margin: 0 0 10px 0; color: #065F46;">Número de seguimiento:</p>
            <p class="tracking-number"><%= @order.tracking_number %></p>
            <% if @order.carrier.present? %>
              <p style="margin: 10px 0 0 0; color: #6B7280; font-size: 14px;">
                Enviado con: <strong><%= carrier_name(@order.carrier) %></strong>
              </p>
            <% end %>
            <% tracking_url = tracking_url(@order.carrier, @order.tracking_number) %>
            <% if tracking_url.present? %>
              <a href="<%= tracking_url %>" class="tracking-button" target="_blank">
                Rastrear mi pedido →
              </a>
            <% end %>
          </div>
        <% end %>

        <div class="order-details">
          <h3>Resumen del pedido</h3>
          <p><strong>Número de pedido:</strong> #<%= @order.id %></p>
          <p><strong>Fecha de compra:</strong> <%= @order.created_at.strftime("%d/%m/%Y") %></p>
          <p><strong>Email:</strong> <%= @order.email %></p>
          <p class="total">Total: <%= humanized_money_with_symbol(@order.total) %></p>
        </div>

        <div class="timeline">
          <h3>Estado de tu pedido</h3>
          <div class="timeline-step">
            <div class="timeline-dot completed"></div>
            <span>Pedido confirmado</span>
          </div>
          <div class="timeline-step">
            <div class="timeline-dot completed"></div>
            <span>Pago procesado</span>
          </div>
          <div class="timeline-step">
            <div class="timeline-dot current"></div>
            <span><strong>Enviado</strong></span>
          </div>
          <div class="timeline-step">
            <div class="timeline-dot pending"></div>
            <span>En camino</span>
          </div>
          <div class="timeline-step">
            <div class="timeline-dot pending"></div>
            <span>Entregado</span>
          </div>
        </div>

        <div class="info-box">
          <h4>Información importante sobre tu envío</h4>
          <p>Los envíos internacionales suelen demorar entre 7 y 21 días hábiles dependiendo del destino y el servicio de correo local.</p>
          <p>Te recomendamos estar atento a las notificaciones de tu correo local, ya que pueden contactarte para coordinar la entrega o informarte sobre trámites aduaneros.</p>
        </div>

        <p>Si tenés alguna pregunta sobre tu pedido, no dudes en contactarnos respondiendo a este email.</p>

        <p>¡Gracias por confiar en Che Market para llevar un pedacito de Argentina a tu hogar!</p>

        <p><strong>El equipo de Che Market</strong></p>
      </div>

      <div class="footer">
        <p>Che Market - Productos argentinos para el mundo</p>
        <p style="font-size: 12px; color: #9CA3AF;">Si no realizaste esta compra, por favor contactanos inmediatamente.</p>
      </div>
    </div>
  </body>
</html>
